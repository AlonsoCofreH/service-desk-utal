<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Service Desk - Universidad de Talca</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>
<body>
  <!-- Pantalla de Inicio de Sesión -->
  <div class="login-container" id="loginScreen">
    <div class="login-header">
      <h2><i class="fas fa-headset"></i> Service Desk</h2>
      <p>Universidad de Talca</p>
    </div>
    
    <form id="loginForm">
      <div class="input-group">
        <label for="email">Correo electrónico:</label>
        <div class="input-icon">
          <i class="fas fa-envelope"></i>
          <input type="email" id="email" placeholder="usuario@utalca.cl" required autocomplete="email" />
        </div>
      </div>
      
      <div class="input-group">
        <label for="password">Contraseña:</label>
        <div class="input-icon">
          <i class="fas fa-lock"></i>
          <input type="password" id="password" placeholder="Contraseña" required autocomplete="current-password" />
        </div>
      </div>
      
      <div class="input-group">
        <label for="role">Rol:</label>
        <div class="input-icon">
          <i class="fas fa-user-tag"></i>
          <select id="role" required>
            <option value="" disabled selected>Selecciona tu rol</option>
            <option value="usuario">Usuario</option>
            <option value="agente">Agente</option>
          </select>
        </div>
      </div>
      
      <button type="submit" class="btn-login">
        <i class="fas fa-sign-in-alt"></i> Iniciar sesión
      </button>
    </form>
  </div>

  <!-- Dashboard del Service Desk -->
  <div class="app-container" id="appScreen" style="display:none;">
    <header class="app-header">
      <div class="logo">
        <i class="fas fa-headset"></i> Service Desk - UTalca
      </div>
      <div class="user-info" id="userInfo">
        <span id="userName"></span>
        <button id="logoutButton">
          <i class="fas fa-sign-out-alt"></i> Cerrar sesión
        </button>
      </div>
    </header>

    <div class="dashboard">
      <!-- Formulario para crear tickets -->
      <div class="ticket-form" id="ticketFormContainer">
        <h2><i class="fas fa-plus-circle"></i> Crear Nuevo Ticket</h2>
        <form id="ticketForm">
          <div class="form-row">
            <div class="form-col">
              <label for="ticketCategory">Categoría:</label>
              <select id="ticketCategory" required>
                <option value="" disabled selected>Selecciona una categoría</option>
                <option value="incidente">Incidente</option>
                <option value="solicitud">Solicitud</option>
              </select>
            </div>
            
            <div class="form-col">
              <label for="ticketService">Servicio:</label>
              <select id="ticketService" required>
                <option value="" disabled selected>Selecciona un servicio</option>

              </select>
            </div>
          </div>

        <!-- Impacto y Urgencia asignados automáticamente -->
        <input type="hidden" id="impact" value="alto">
        <input type="hidden" id="urgency" value="alta">

          <label for="ticketDescription">Descripción:</label>
          <textarea id="ticketDescription" placeholder="Describe el problema o solicitud..." required></textarea>

          <div class="info-dinamica">
            <div class="info-item">
              <i class="fas fa-flag"></i>
              <p><strong>Prioridad:</strong> <span id="priorityValue">N/A</span></p>
            </div>
            <div class="info-item">
              <i class="fas fa-clock"></i>
              <p><strong>SLA estimado:</strong> <span id="slaValue">N/A</span></p>
            </div>
          </div>

          <button type="submit">
            <i class="fas fa-paper-plane"></i> Crear Ticket
          </button>
        </form>
      </div>

      <!-- Visualización de tickets -->
      <div class="ticket-list-container">
        <div class="ticket-list" id="ticketListContainer">
          <h3><i class="fas fa-ticket-alt"></i> Mis Tickets</h3>
          <div id="ticketList" class="tickets-grid"></div>
        </div>
      
        <!-- Tickets sin asignar (solo para agentes) -->
        <div class="unassigned-tickets" id="unassignedTicketsContainer" style="display:none;">
          <h3><i class="fas fa-tasks"></i> Tickets sin Asignar</h3>
          <div id="unassignedTickets" class="tickets-grid"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>